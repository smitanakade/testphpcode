"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),StaffLogin=function(){function e(){_classCallCheck(this,e),this.localStorageItem="userData",this.isLocalStorage=!1,this.init()}return _createClass(e,[{key:"init",value:function(){this.isLocalStorageAvailable()}},{key:"checkIfLoggedIn",value:function(e){var t=this.getLocalStorage();if(!t)return e(!1);this.login(t.code,e)}},{key:"login",value:function(e,t){this.checkCode(e,function(e,a){e?t(!1,e):t(!0)})}},{key:"getLocalStorage",value:function(){if(this.isLocalStorage){var e=localStorage.getItem(this.localStorageItem);return JSON.parse(e)}return null}},{key:"setLocalStorage",value:function(e){return this.isLocalStorage?localStorage.setItem(this.localStorageItem,e):null}},{key:"checkCode",value:function(e,t){var a=this,o={staffDetails:{code:e}};this.makeJsonRequest("https://nd72t7wdsg.execute-api.ap-southeast-2.amazonaws.com/development",o,function(e,o){if(e)return t(e);o.data.hasOwnProperty("code")?(a.setLocalStorage(JSON.stringify(o.data)),t(null,!0)):t(o.data.errorMessage)})}},{key:"makeJsonRequest",value:function(e,t,a){axios.post(e,t).then(function(e){e.data?a(null,e):a("No data was recieved")}).catch(function(e){a(e)})}},{key:"isLocalStorageAvailable",value:function(){try{localStorage.setItem("test","test"),localStorage.removeItem("test"),this.isLocalStorage=!0}catch(e){this.isLocalStorage=!1}}}]),e}();